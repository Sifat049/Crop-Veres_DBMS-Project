<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Buyer Marketplace - CropVerse</title>
  <link rel="stylesheet" href="../css/style.css" />
</head>
<body>
  <div class="nav">
    <div class="left">
      <span class="badge">Buyer</span>
      <a class="navlink" href="dashboard.html">Dashboard</a>
      <a class="navlink active" href="marketplace.html">Marketplace</a>
      <a class="navlink" href="chats.html">My Chats</a>
      <a class="navlink" href="profile.html">Profile</a>
      <a class="navlink" href="price-chart.html">Price Chart</a>
    </div>
    <div class="right">
      <button id="themeToggle" class="ghost">ðŸŒ“</button>
      <button class="danger" onclick="logout()">Logout</button>
    </div>
  </div>

  <div class="container">
    <div class="hero">
      <h1>ðŸ›’ Marketplace</h1>
      <p class="muted">Search crops, compare prices, and buy directly from farmers.</p>
    </div>

    <div class="card fade">
      <div class="filterbar">
        <input id="qCrop" placeholder="Search crop (e.g., Rice)" />
        <input id="qFarmer" placeholder="Search farmer name" />
        <input id="qDistrict" placeholder="Filter district (e.g., Bogura)" />
        <button id="btnSearch">Search</button>
        <button id="btnClear" class="ghost">Clear</button>
      </div>
      <div id="marketList" class="grid"></div>
    </div>
  </div>

  <!-- Farmer Modal -->
  <div id="farmerModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalTop">
        <h2 id="fmTitle">Farmer</h2>
        <button id="fmClose" class="ghost">âœ–</button>
      </div>
      <div id="fmBody">Loading...</div>
    </div>
  </div>

  <!-- Chat Modal -->
  <div id="chatModal" class="modal hidden">
    <div class="modalCard">
      <div class="modalTop">
        <h2 id="chatTitle">ðŸ’¬ Chat</h2>
        <button id="chatClose" class="ghost">âœ–</button>
      </div>
      <div id="chatBox" style="height:280px; overflow:auto; margin-top:10px; padding:10px; border:1px solid var(--border); border-radius:14px; background: var(--card2);"></div>
      <div class="row" style="gap:10px; margin-top:10px;">
        <button id="chatEmoji" class="ghost" title="Emoji">ðŸ™‚</button>
        <button id="chatImageBtn" class="ghost" title="Send image">ðŸ“¸</button>
        <input id="chatImage" type="file" accept="image/*" hidden />
        <input id="chatInput" placeholder="Type a message..." style="flex:1" />
        <button id="chatSend">Send</button>
      </div>
      <div id="emojiPanel" class="emojiPanel hidden"></div>
      <p id="chatHint" class="muted" style="margin-top:8px;"></p>
    </div>
  </div>

  <script src="../js/api.js"></script>
  <script src="../js/buyer_marketplace.js"></script>
  <script src="../js/chat.js"></script>
</body>
</html>
